{
	http_port {$CADDY_PORT:-11111}
	admin off
	log {
		output stdout
		level INFO
	}
}

:{$CADDY_PORT} {
	# --- Log File Access ---
	handle_path /logs/* {
		file_server browse {
			root /app/logs # Changed path
		}
	}

	# --- Root/Fallback Page ---
	# Provides link to logs. VNC requires external client.
	handle {
		respond * 200 {
			body `<!DOCTYPE html>
<html>
<head><title>VisoMaster Portal (alt)</title></head>
<body>
<h1>VisoMaster Portal (alt)</h1>
<p>Provides access to logs. VNC access requires a VNC client connecting to the mapped port (check Vast.ai mapping for internal container port {$VNC_INTERNAL_PORT}). A web VNC proxy is not configured in this version.</p>
<ul>
	<li><a href="/logs/">Browse Application Logs</a></li>
</ul>
</body>
</html>`
			headers {
				Content-Type text/html
			}
		}
	}

	log
}